<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui = "http://java.sun.com/jsf/facelets">

<h:head>
 <title>Cadastro de Usu√°rios</title>
</h:head>
<h:body>
    
    <ui:include src="/menu.xhtml"/>
    
   <br/>
    <h:form rendered="#{pessoaBean.permiteAcesso('ADMINISTRADOR')}">
    
    <h:messages infoStyle="color:green;"/>
    
    <h:panelGrid columns="2">
    
    <f:facet name="header">
      <h:outputText value="Cadastro em Jsf"/>
    </f:facet>
    
    <h:outputLabel value="Id: "/>
    <h:inputText value="#{pessoaBean.pessoa.id}" readonly="true"/>
    
    
    <h:outputLabel value="Nome: "/>
    <h:inputText value="#{pessoaBean.pessoa.nome}"/>
    
    
    <h:outputLabel value="Sobrenome: "/>
    <h:inputText value="#{pessoaBean.pessoa.sobrenome}"/>
    
    
    <h:outputLabel value="Idade: "/>
    <h:inputText value="#{pessoaBean.pessoa.idade}"/>
    
    <h:outputLabel value="CPF: "/>
    <h:inputText value="#{pessoaBean.pessoa.cpf}"/>
    
    <h:outputLabel value="Titulo de Eleitor: "/>
    <h:inputText value="#{pessoaBean.pessoa.tituloEleitor}"/>
    
    <h:outputLabel value="Login: "/>
    <h:inputText value="#{pessoaBean.pessoa.login}"/>
    
    <h:outputLabel value="Senha: "/>
    <h:inputSecret value="#{pessoaBean.pessoa.senha}"/>
    
     <h:outputLabel value="Perfil: "/>
    
    <h:selectOneMenu id="perfil" value="#{pessoaBean.pessoa.perfilUser}">
         
         <f:selectItem  itemValue ="Nao" itemLabel="[--Selecione--]" noSelectionOption="true"/>
         <f:selectItem itemValue="ADMINISTRADOR"/>
         <f:selectItem itemValue="SECRETARIA"/>
         <f:selectItem itemValue="RECEPCIONISTA	"/>
         
    </h:selectOneMenu >
    
    <h:outputLabel value="Sexo: "/>
    
    <h:selectOneMenu id="campoSexo" value="#{pessoaBean.pessoa.sexo}">
         
         <f:selectItem  itemValue ="Nao" itemLabel="[--Selecione--]" noSelectionOption="true"/>
         <f:selectItem itemValue="MASCULINO"/>
         <f:selectItem itemValue="FEMININO"/>
         
    </h:selectOneMenu >
    
    <h:outputLabel value="Nascimento: "/>
    <h:inputText value="#{pessoaBean.pessoa.dataNascimento}">
      <f:convertDateTime pattern="dd/MM/yyyy" timeZone="GMT-03:00" />
    </h:inputText>
    
    <h:outputLabel value="Frameworks: "/>
    
    <h:selectManyMenu id="campoFrameworks" style="height:150px;"
                      value="#{pessoaBean.pessoa.frameworks}">
    
       <f:selectItem itemValue="Servlets"/>
       <f:selectItem itemValue="JSP"/>
       <f:selectItem itemValue="Hinernate"/>
       <f:selectItem itemValue="Spring MVC"/>
       <f:selectItem itemValue="Primefaces"/>
    
    </h:selectManyMenu>
    
     <h:outputLabel value="CEP: "/>
     <h:inputText value="#{pessoaBean.pessoa.cep}">
          <f:ajax event="blur" execute="@this" listener="#{pessoaBean.pesquisarCep}"/> 
     </h:inputText>
     
     <h:outputLabel value="Ativo: "/>
     
     <h:selectBooleanCheckbox value="#{pessoaBean.pessoa.ativo}">
        
     </h:selectBooleanCheckbox>
     
    <h:outputLabel/>
    
     <h:panelGroup>
     
        <h:commandButton value="Novo" action="#{pessoaBean.novo}" image="/resources/imagens/novo.png" title="Novo"/>
        <h:commandButton value="Salvar" action="#{pessoaBean.salvar}" image="/resources/imagens/salvar.png" title="Salvar" style="margin-left: 1cm"/>
        <h:commandButton value="Remove" action="#{pessoaBean.remove}" image="/resources/imagens/delete.png" title="deletar" style="margin-left: 1cm" />
        <h:commandButton value="Limpar" type="reset" image="/resources/imagens/limpar.png" title="Limpar" style="margin-left: 1cm" />
     </h:panelGroup>
     
    </h:panelGrid>
    
    <h:dataTable value="#{pessoaBean.pessoas}" var="p" border="3" cellpadding="6">
    
      <f:facet name="header">
      
        Lista de Pessoas Cadastradas
      
      </f:facet>
      
       <h:column>
           <f:facet name="header">ID</f:facet>
           <h:outputText value="#{p.id}"/>
       </h:column>
    
         <h:column>
           <f:facet name="header">Nome</f:facet>
           <h:outputText value="#{p.nome}"/>
       </h:column>
       
         <h:column>
           <f:facet name="header">Sobrenome</f:facet>
           <h:outputText value="#{p.sobrenome}"/>
       </h:column>
       
         <h:column>
           <f:facet name="header">Sexo</f:facet>
           <h:outputText value="#{p.sexo}"/>
       </h:column>

       <h:column>
         <f:facet name="header">Editar</f:facet>
         <h:commandLink title="Editar">
           <f:setPropertyActionListener value="#{p}" target="#{pessoaBean.pessoa}"/>
           <h:graphicImage value="/resources/imagens/editar.png"/>
         </h:commandLink>
       </h:column>
       
       <h:outputLabel style="text-align: center;" value=" "/>
       
        <h:column>
        
         <f:facet name="header">Excluir</f:facet>
         <h:commandLink title="Excluir" action="#{pessoaBean.remove}">          
           <f:setPropertyActionListener value="#{p}" target="#{pessoaBean.pessoa}"/>
           <h:graphicImage value="/resources/imagens/delete.png"/>
         </h:commandLink>
         
       </h:column>
       
    </h:dataTable>
    
    </h:form>

</h:body>
</html>